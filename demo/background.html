<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Background Test</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
      integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/seamless-texture-generator@1.3.5/dist/tgen-with-presets.min.js"
      integrity="sha256-trzqAn75mpT5g+ragtNFM6CULQEqNmjsrFwqVjCPmYo="
      crossorigin="anonymous"
    ></script>
  </head>

  <div id="theDiv"></div>

  <body>
    <script>
			const sleep = ms => new Promise(res => setTimeout(res, ms));

      var generator = tgen.init(512,512);
			(async () => {
      for (let i = 0; i < 1000; i++) {
        var texture = generator.render({
          preset: {
            name: "random",
            seed: null,
          },
        });

       // var img = document.createElement('img');
       // img.src = 'https://i.stack.imgur.com/RQ3Id.png';
       // document.getElementById('gamediv').appendChild(img)
        
        $('<img/>')
        .attr('src', texture.toCanvas().toDataURL("image/png"))
        .appendTo('#theDiv');

				//var canvas = document.getElementById('canvas');
				await sleep(1);
        //texture.toCanvas().toBlob(function(blob){
        //    var newImg = document.createElement('img'), url = URL.createObjectURL(blob);
				//		newImg.onload = function() {
				//			// no longer need to read the blob so it's revoked
				//			URL.revokeObjectURL(url);
				//		};
				//		newImg.src = url;
				//		document.body.appendChild(newImg);


        //});


      }
			})();

     // $("body").css(
     //   "background-image",
     //   "url(" + texture.toCanvas().toDataURL("image/png") + ")"
     // );
    </script>
  </body>
</html>
